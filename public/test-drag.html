<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EDF Canvas æ‹–åŠ¨åŠŸèƒ½æµ‹è¯•</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .test-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .test-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .test-title {
            color: #2196F3;
            font-size: 24px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e3f2fd;
            padding-bottom: 10px;
        }
        
        .demo-canvas {
            border: 2px solid #2196F3;
            border-radius: 8px;
            margin: 20px 0;
            background: white;
        }
        
        .status-info {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <header>
            <h1>ğŸ§  EDF Canvas æ‹–åŠ¨åŠŸèƒ½æµ‹è¯•</h1>
            <p class="subtitle">æµ‹è¯•ç±»ä¼¼Kçº¿å›¾çš„å·¦å³æ‹–åŠ¨å’Œç¼©æ”¾åŠŸèƒ½</p>
        </header>

        <div class="test-section">
            <h2 class="test-title">ğŸ“Š æ¨¡æ‹ŸEEGæ•°æ®æ‹–åŠ¨æµ‹è¯•</h2>
            
            <div class="interaction-hints">
                <strong>ğŸ’¡ æµ‹è¯•æ“ä½œæŒ‡å—ï¼š</strong>
                <ul>
                    <li><strong>æ‹–åŠ¨å¹³ç§»ï¼š</strong>åœ¨æ³¢å½¢å›¾ä¸ŠæŒ‰ä½é¼ æ ‡å·¦é”®å¹¶æ‹–åŠ¨ï¼Œå¯ä»¥å·¦å³æŸ¥çœ‹ä¸åŒæ—¶é—´æ®µçš„æ•°æ®</li>
                    <li><strong>æ»šè½®ç¼©æ”¾ï¼š</strong>åœ¨æ³¢å½¢å›¾ä¸Šæ»šåŠ¨é¼ æ ‡æ»šè½®ï¼Œå¯ä»¥æ”¾å¤§æˆ–ç¼©å°æ—¶é—´çª—å£</li>
                    <li><strong>åŒå‡»é‡ç½®ï¼š</strong>åŒå‡»æ³¢å½¢å›¾å¯ä»¥é‡ç½®åˆ°åˆå§‹è§†å›¾</li>
                    <li><strong>æ»šåŠ¨æ¡ï¼š</strong>æ³¢å½¢å›¾åº•éƒ¨çš„è“è‰²æ»šåŠ¨æ¡æ˜¾ç¤ºå½“å‰æŸ¥çœ‹çš„æ•°æ®ä½ç½®</li>
                </ul>
            </div>

            <div class="eeg-channel-container">
                <div class="eeg-channel-label">æµ‹è¯•é€šé“ 1</div>
                <canvas id="testCanvas1" class="eeg-channel-canvas demo-canvas" width="1200" height="120"></canvas>
            </div>

            <div class="eeg-channel-container">
                <div class="eeg-channel-label">æµ‹è¯•é€šé“ 2</div>
                <canvas id="testCanvas2" class="eeg-channel-canvas demo-canvas" width="1200" height="120"></canvas>
            </div>

            <div class="status-info" id="statusInfo">
                çŠ¶æ€ä¿¡æ¯å°†åœ¨è¿™é‡Œæ˜¾ç¤º...
            </div>
        </div>
    </div>

    <script>
        // ç”Ÿæˆæ¨¡æ‹ŸEEGæ•°æ®
        function generateMockEEGData(duration = 3600, sampleRate = 256) {
            const totalPoints = duration * sampleRate;
            const dataPoints = [];
            const timeStamps = [];
            
            for (let i = 0; i < totalPoints; i++) {
                const time = i / sampleRate;
                timeStamps.push(time);
                
                // ç”Ÿæˆæ¨¡æ‹Ÿçš„EEGä¿¡å·ï¼šåŸºç¡€æ³¢å½¢ + å™ªå£° + å‘¨æœŸæ€§æˆåˆ†
                const baseFreq = 10; // 10Hz alphaæ³¢
                const noise = (Math.random() - 0.5) * 20;
                const alpha = 50 * Math.sin(2 * Math.PI * baseFreq * time);
                const beta = 20 * Math.sin(2 * Math.PI * 25 * time);
                const theta = 30 * Math.sin(2 * Math.PI * 6 * time);
                
                const value = alpha + beta + theta + noise;
                dataPoints.push(value);
            }
            
            return {
                label: 'æ¨¡æ‹ŸEEGé€šé“',
                allDataPoints: dataPoints,
                allTimeStamps: timeStamps,
                sampleRate: sampleRate,
                physicalDimension: 'Î¼V',
                signalStartTime: 0,
                signalDuration: duration
            };
        }

        // æ ¼å¼åŒ–æ—¶é—´æ˜¾ç¤º
        function formatTimeFromSeconds(totalSeconds) {
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = Math.floor(totalSeconds % 60);
            return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // è¿™é‡Œéœ€è¦åŒ…å«åŸå§‹çš„æ‹–åŠ¨åŠŸèƒ½ä»£ç 
        // ç”±äºä»£ç è¾ƒé•¿ï¼Œæˆ‘ä»¬ç›´æ¥å¼•ç”¨ä¸»è„šæœ¬æ–‡ä»¶
        
        // åˆå§‹åŒ–æµ‹è¯•
        document.addEventListener('DOMContentLoaded', () => {
            const canvas1 = document.getElementById('testCanvas1');
            const canvas2 = document.getElementById('testCanvas2');
            const statusInfo = document.getElementById('statusInfo');
            
            // ç”Ÿæˆä¸¤ä¸ªä¸åŒçš„æ¨¡æ‹Ÿæ•°æ®é›†
            const mockData1 = generateMockEEGData(3600, 256); // 1å°æ—¶æ•°æ®
            const mockData2 = generateMockEEGData(7200, 512); // 2å°æ—¶æ•°æ®ï¼Œæ›´é«˜é‡‡æ ·ç‡
            
            mockData1.label = 'æ¨¡æ‹Ÿé€šé“ 1 (Alphaæ³¢ä¸»å¯¼)';
            mockData2.label = 'æ¨¡æ‹Ÿé€šé“ 2 (æ··åˆé¢‘ç‡)';
            
            // æ›´æ–°çŠ¶æ€ä¿¡æ¯
            statusInfo.innerHTML = `
                <strong>æµ‹è¯•æ•°æ®ä¿¡æ¯ï¼š</strong><br>
                é€šé“1: ${mockData1.allDataPoints.length.toLocaleString()} æ•°æ®ç‚¹, ${mockData1.sampleRate}Hz, ${(mockData1.signalDuration/60).toFixed(1)}åˆ†é’Ÿ<br>
                é€šé“2: ${mockData2.allDataPoints.length.toLocaleString()} æ•°æ®ç‚¹, ${mockData2.sampleRate}Hz, ${(mockData2.signalDuration/60).toFixed(1)}åˆ†é’Ÿ<br>
                <em>è¯·åœ¨ä¸Šæ–¹çš„canvasä¸Šæµ‹è¯•æ‹–åŠ¨å’Œç¼©æ”¾åŠŸèƒ½</em>
            `;
            
            console.log('æµ‹è¯•æ•°æ®å·²ç”Ÿæˆ:', { mockData1, mockData2 });
            
            // æ³¨æ„ï¼šè¿™é‡Œéœ€è¦å®é™…çš„æ‹–åŠ¨åŠŸèƒ½ä»£ç 
            // ç”±äºä»£ç å¤æ‚ï¼Œå»ºè®®ç›´æ¥åœ¨ä¸»åº”ç”¨ä¸­æµ‹è¯•
            alert('æµ‹è¯•é¡µé¢å·²å‡†å¤‡å°±ç»ªï¼\n\nè¯·åœ¨ä¸»åº”ç”¨ä¸­ä¸Šä¼ EDFæ–‡ä»¶æ¥æµ‹è¯•æ‹–åŠ¨åŠŸèƒ½ã€‚\n\nè¿™ä¸ªé¡µé¢ä¸»è¦ç”¨äºå±•ç¤ºUIå¸ƒå±€ã€‚');
        });
    </script>
</body>
</html> 