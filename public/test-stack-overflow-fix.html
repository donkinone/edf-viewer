<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å †æ ˆæº¢å‡ºä¿®å¤éªŒè¯</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .test-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .fix-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .fix-title {
            color: #e74c3c;
            font-size: 24px;
            margin-bottom: 20px;
            border-bottom: 2px solid #ffebee;
            padding-bottom: 10px;
        }
        
        .fix-details {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .fix-details h3 {
            color: #721c24;
            margin-bottom: 10px;
        }
        
        .fix-details ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .fix-details li {
            margin: 8px 0;
            color: #721c24;
        }
        
        .solution-info {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .solution-info h3 {
            color: #155724;
            margin-bottom: 10px;
        }
        
        .solution-info ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .solution-info li {
            margin: 8px 0;
            color: #155724;
        }
        
        .code-block {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 12px;
            overflow-x: auto;
        }
        
        .test-badge {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <header>
            <h1>ğŸš¨ å †æ ˆæº¢å‡ºä¿®å¤éªŒè¯</h1>
            <div class="test-badge">é”™è¯¯ä¿®å¤ç‰ˆæœ¬</div>
            <p class="subtitle">è§£å†³ "maximum call stack size exceeded" é”™è¯¯</p>
        </header>

        <div class="fix-section">
            <h2 class="fix-title">ğŸ” é—®é¢˜åˆ†æ</h2>
            
            <div class="fix-details">
                <h3>âŒ é”™è¯¯ç°è±¡ï¼š</h3>
                <ul>
                    <li><strong>é”™è¯¯ä¿¡æ¯ï¼š</strong>"è§£ææœåŠ¡å™¨å“åº”æ—¶å‡ºé”™ï¼šmaximum call stack size exceeded"</li>
                    <li><strong>å‘ç”Ÿä½ç½®ï¼š</strong>å‰ç«¯ JSON.parse() è§£ææœåŠ¡å™¨å“åº”æ—¶</li>
                    <li><strong>è§¦å‘æ¡ä»¶ï¼š</strong>ä¸Šä¼ å¤§å‹EDFæ–‡ä»¶æ—¶</li>
                    <li><strong>æ ¹æœ¬åŸå› ï¼š</strong>Javaåç«¯ä¼ è¾“äº†è¿‡å¤šçš„æ•°æ®ç‚¹ï¼Œå¯¼è‡´JSONåºåˆ—åŒ–å †æ ˆæº¢å‡º</li>
                </ul>
            </div>

            <div class="code-block">
                <strong>é”™è¯¯å †æ ˆç¤ºä¾‹ï¼š</strong><br>
                RangeError: Maximum call stack size exceeded<br>
                &nbsp;&nbsp;at JSON.parse (&lt;anonymous&gt;)<br>
                &nbsp;&nbsp;at XMLHttpRequest.xhr.onload (script.js:190:32)
            </div>
        </div>

        <div class="fix-section">
            <h2 class="fix-title">ğŸ› ï¸ ä¿®å¤æ–¹æ¡ˆ</h2>
            
            <div class="solution-info">
                <h3>âœ… åç«¯ä¿®å¤ï¼ˆEdfParserService.javaï¼‰ï¼š</h3>
                <ul>
                    <li><strong>æ•°æ®é‡é™åˆ¶ï¼š</strong>æœ€å¤šä¼ è¾“100,000ä¸ªæ•°æ®ç‚¹</li>
                    <li><strong>æ™ºèƒ½é‡‡æ ·ï¼š</strong>å¯¹å¤§æ–‡ä»¶è¿›è¡Œé™é‡‡æ ·ï¼Œä¿ç•™å…³é”®ç‰¹å¾</li>
                    <li><strong>é‡‡æ ·ç®—æ³•ï¼š</strong>step = max(1, totalDataPoints / 100000)</li>
                    <li><strong>å…ƒæ•°æ®ä¿ç•™ï¼š</strong>è®°å½•åŸå§‹æ•°æ®ç‚¹æ•°ã€é‡‡æ ·æ•°æ®ç‚¹æ•°ã€é‡‡æ ·æ­¥é•¿</li>
                </ul>
            </div>

            <div class="code-block">
                <strong>ä¿®å¤ä»£ç ç‰‡æ®µï¼š</strong><br>
                // é™åˆ¶ä¼ è¾“çš„æ•°æ®é‡ä»¥é¿å…JSONåºåˆ—åŒ–å †æ ˆæº¢å‡º<br>
                int maxDataPoints = 100000;<br>
                int totalDataPoints = channelData.length;<br>
                int step = Math.max(1, totalDataPoints / maxDataPoints);<br>
                <br>
                // æ™ºèƒ½é‡‡æ ·ï¼šä¿ç•™å…³é”®æ•°æ®ç‚¹<br>
                for (int j = 0; j < totalDataPoints; j += step) {<br>
                &nbsp;&nbsp;allDataPoints.add(channelData[j]);<br>
                &nbsp;&nbsp;// ...<br>
                }
            </div>

            <div class="solution-info">
                <h3>âœ… å‰ç«¯é€‚é…ï¼ˆscript.jsï¼‰ï¼š</h3>
                <ul>
                    <li><strong>é‡‡æ ·ä¿¡æ¯æ˜¾ç¤ºï¼š</strong>åœ¨é€šé“è¡¨æ ¼ä¸­æ˜¾ç¤ºé‡‡æ ·æ¯”ä¾‹</li>
                    <li><strong>ç”¨æˆ·æç¤ºï¼š</strong>åœ¨äº¤äº’æŒ‡å—ä¸­è¯´æ˜æ•°æ®é‡‡æ ·</li>
                    <li><strong>æ—¥å¿—å¢å¼ºï¼š</strong>æ˜¾ç¤ºé‡‡æ ·æ­¥é•¿å’Œæ•°æ®ç‚¹ç»Ÿè®¡</li>
                    <li><strong>å‘ä¸‹å…¼å®¹ï¼š</strong>æ”¯æŒæœªé‡‡æ ·çš„å°æ–‡ä»¶</li>
                </ul>
            </div>
        </div>

        <div class="fix-section">
            <h2 class="fix-title">ğŸ“Š ä¿®å¤æ•ˆæœå¯¹æ¯”</h2>
            
            <div class="code-block">
                <strong>ä¿®å¤å‰ï¼š</strong><br>
                - å¤§æ–‡ä»¶ï¼ˆå¦‚1GB EDFï¼‰ï¼šä¼ è¾“æ•°ç™¾ä¸‡æ•°æ®ç‚¹<br>
                - JSONåºåˆ—åŒ–ï¼šå †æ ˆæº¢å‡ºï¼Œè§£æå¤±è´¥<br>
                - ç”¨æˆ·ä½“éªŒï¼šä¸Šä¼ å¤±è´¥ï¼Œé”™è¯¯æç¤º<br>
                <br>
                <strong>ä¿®å¤åï¼š</strong><br>
                - å¤§æ–‡ä»¶ï¼ˆå¦‚1GB EDFï¼‰ï¼šæœ€å¤šä¼ è¾“100,000æ•°æ®ç‚¹<br>
                - JSONåºåˆ—åŒ–ï¼šæ­£å¸¸å®Œæˆï¼Œå¿«é€Ÿè§£æ<br>
                - ç”¨æˆ·ä½“éªŒï¼šä¸Šä¼ æˆåŠŸï¼Œæ˜¾ç¤ºé‡‡æ ·ä¿¡æ¯<br>
                - æ•°æ®è´¨é‡ï¼šä¿ç•™å…³é”®ç‰¹å¾ï¼Œæ”¯æŒå®Œæ•´äº¤äº’
            </div>
        </div>

        <div class="fix-section">
            <h2 class="fix-title">ğŸ§ª æµ‹è¯•éªŒè¯æ­¥éª¤</h2>
            
            <div class="interaction-hints">
                <strong>ğŸ’¡ è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤éªŒè¯ä¿®å¤æ•ˆæœï¼š</strong>
                <ol>
                    <li><strong>å¯åŠ¨åç«¯ï¼š</strong>
                        <code>cd backend && mvn spring-boot:run</code>
                    </li>
                    <li><strong>å¯åŠ¨å‰ç«¯ï¼š</strong>
                        <code>./start-frontend.sh</code>
                    </li>
                    <li><strong>è®¿é—®åº”ç”¨ï¼š</strong>
                        <a href="http://localhost:3000" target="_blank">http://localhost:3000</a>
                    </li>
                    <li><strong>ä¸Šä¼ å¤§æ–‡ä»¶ï¼š</strong>
                        <ul>
                            <li>é€‰æ‹©è¾ƒå¤§çš„EDFæ–‡ä»¶ï¼ˆ>10MBï¼‰</li>
                            <li>è§‚å¯Ÿæ˜¯å¦å‡ºç°å †æ ˆæº¢å‡ºé”™è¯¯</li>
                            <li>æ£€æŸ¥æ˜¯å¦æ˜¾ç¤ºé‡‡æ ·ä¿¡æ¯</li>
                        </ul>
                    </li>
                    <li><strong>éªŒè¯åŠŸèƒ½ï¼š</strong>
                        <ul>
                            <li>æ³¢å½¢å›¾æ­£å¸¸æ˜¾ç¤º</li>
                            <li>æ‹–åŠ¨å’Œç¼©æ”¾åŠŸèƒ½æ­£å¸¸</li>
                            <li>é€šé“è¡¨æ ¼æ˜¾ç¤ºé‡‡æ ·æ¯”ä¾‹</li>
                            <li>äº¤äº’æç¤ºåŒ…å«é‡‡æ ·è¯´æ˜</li>
                        </ul>
                    </li>
                </ol>
            </div>
        </div>

        <div class="fix-section">
            <h2 class="fix-title">ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–</h2>
            
            <div class="solution-info">
                <h3>âœ… ä¼˜åŒ–æ•ˆæœï¼š</h3>
                <ul>
                    <li><strong>ä¼ è¾“é€Ÿåº¦ï¼š</strong>å¤§å¹…å‡å°‘ç½‘ç»œä¼ è¾“æ—¶é—´</li>
                    <li><strong>å†…å­˜ä½¿ç”¨ï¼š</strong>é™ä½å‰ç«¯å†…å­˜å ç”¨</li>
                    <li><strong>è§£æé€Ÿåº¦ï¼š</strong>JSONè§£ææ›´å¿«</li>
                    <li><strong>æ¸²æŸ“æ€§èƒ½ï¼š</strong>Canvasç»˜åˆ¶æ›´æµç•…</li>
                    <li><strong>ç”¨æˆ·ä½“éªŒï¼š</strong>æ”¯æŒæ›´å¤§çš„EDFæ–‡ä»¶</li>
                </ul>
            </div>

            <div class="code-block">
                <strong>æ€§èƒ½æ•°æ®ç¤ºä¾‹ï¼š</strong><br>
                æ–‡ä»¶å¤§å°: 500MB EDF<br>
                åŸå§‹æ•°æ®ç‚¹: 2,000,000 ç‚¹/é€šé“<br>
                é‡‡æ ·åæ•°æ®ç‚¹: 100,000 ç‚¹/é€šé“<br>
                é‡‡æ ·æ¯”ä¾‹: 1:20<br>
                ä¼ è¾“å‡å°‘: 95%<br>
                è§£ææ—¶é—´: ä»å¤±è´¥åˆ° &lt;1ç§’
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸš¨ å †æ ˆæº¢å‡ºä¿®å¤éªŒè¯é¡µé¢å·²åŠ è½½');
            console.log('ä¿®å¤è¦ç‚¹ï¼š');
            console.log('1. åç«¯é™åˆ¶ä¼ è¾“æ•°æ®é‡ï¼ˆæœ€å¤š100,000ç‚¹ï¼‰');
            console.log('2. æ™ºèƒ½é‡‡æ ·ç®—æ³•ä¿ç•™å…³é”®ç‰¹å¾');
            console.log('3. å‰ç«¯é€‚é…æ˜¾ç¤ºé‡‡æ ·ä¿¡æ¯');
            console.log('4. å‘ä¸‹å…¼å®¹å°æ–‡ä»¶');
        });
    </script>
</body>
</html> 